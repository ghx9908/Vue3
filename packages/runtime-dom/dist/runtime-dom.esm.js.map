{
  "version": 3,
  "sources": ["../src/nodeOps.ts", "../src/patchProp.ts", "../src/index.ts"],
  "sourcesContent": ["// \u8FD9\u91CC\u5B58\u653E\u5E38\u89C1DOM\u64CD\u4F5CAPI\uFF0C\u4E0D\u540C\u8FD0\u884C\u65F6\u63D0\u4F9B\u7684\u5177\u4F53\u5B9E\u73B0\u4E0D\u4E00\u6837\uFF0C\n// \u6700\u7EC8\u5C06\u64CD\u4F5C\u65B9\u6CD5\u4F20\u9012\u5230runtime-core\u4E2D\uFF0C\u6240\u4EE5runtime-core\u4E0D\u9700\u8981\u5173\u5FC3\u5E73\u53F0\u76F8\u5173\u4EE3\u7801~\n\nexport const nodeOps = {\n  insert: (child, parent, anchor) => { // \u6DFB\u52A0\u8282\u70B9\n    parent.insertBefore(child, anchor || null);\n  },\n  remove: child => { // \u8282\u70B9\u5220\u9664\n    const parent = child.parentNode;\n    if (parent) {\n      parent.removeChild(child);\n    }\n  },\n  createElement: (tag) => document.createElement(tag),// \u521B\u5EFA\u8282\u70B9\n  createText: text => document.createTextNode(text),// \u521B\u5EFA\u6587\u672C\n  setText: (node, text) => node.nodeValue = text, //  \u8BBE\u7F6E\u6587\u672C\u8282\u70B9\u5185\u5BB9\n  setElementText: (el, text) => el.textContent = text, // \u8BBE\u7F6E\u6587\u672C\u5143\u7D20\u4E2D\u7684\u5185\u5BB9\n  parentNode: node => node.parentNode, // \u7236\u4EB2\u8282\u70B9\n  nextSibling: node => node.nextSibling, // \u4E0B\u4E00\u4E2A\u8282\u70B9\n  querySelector: selector => document.querySelector(selector) // \u641C\u7D22\u5143\u7D20\n}\n", "\n// \u6BD4\u5BF9\u5C5E\u6027\u65B9\u6CD5\nexport const patchProp = (el, key, prevValue, nextValue) => {\n  if (key === 'class') {\n    patchClass(el, nextValue)\n  } else if (key === 'style') {\n    patchStyle(el, prevValue, nextValue);\n  } else if (/^on[^a-z]/.test(key)) {\n    patchEvent(el, key, nextValue)\n  } else {\n    patchAttr(el, key, nextValue)\n  }\n}\n\n// \u64CD\u4F5C\u7C7B\u540D\nfunction patchClass(el, value) { // \u6839\u636E\u6700\u65B0\u503C\u8BBE\u7F6E\u7C7B\u540D\n  // class:\"abc\" class:\"abc bcd efg\"\n  if (value == null) {\n    el.removeAttribute('class');\n  } else {\n    el.className = value;\n  }\n}\n\n// \u64CD\u4F5C\u6837\u5F0F\nfunction patchStyle(el, prev, next) { // \u66F4\u65B0style\n  // \u65E7\u7684{color:red,font-size:18px},  \u65B0\u7684{background:red\uFF0Ccolor:blue}\n  const style = el.style;\n  for (const key in next) { // \u7528\u6700\u65B0\u7684\u76F4\u63A5\u8986\u76D6\n    style[key] = next[key]\n  }\n  if (prev) {\n    for (const key in prev) {// \u8001\u7684\u6709\u65B0\u7684\u6CA1\u6709\u5220\u9664\n      if (next[key] == null) {\n        style[key] = null\n      }\n    }\n  }\n}\n\n\n// \u64CD\u4F5C\u4E8B\u4EF6\n/**\n * \u521B\u5EFA\u4E8B\u4EF6\u56DE\u8C03\u51FD\u6570\n * @param {Function} initialValue \u4E8B\u4EF6\u56DE\u8C03\u51FD\u6570 \n */\nfunction createInvoker(initialValue) {\n  const invoker = (e) => invoker.value(e);\n  invoker.value = initialValue;\n  return invoker;\n}\n\n/**\n * \u66F4\u65B0\u5143\u7D20\u7684\u4E8B\u4EF6\u56DE\u8C03\n * @param {Element} el \u5143\u7D20 \n * @param {string} rawName \u4E8B\u4EF6\u540D\n * @param {Function | null} nextValue \u65B0\u7684\u4E8B\u4EF6\u56DE\u8C03\n */\nfunction patchEvent(el, rawName, nextValue) {  // \u66F4\u65B0\u4E8B\u4EF6\n  // \u5143\u7D20\u7684\u4E8B\u4EF6\u56DE\u8C03\u51FD\u6570\u7F13\u5B58\u5BF9\u8C61\n  const invokers = el._vei || (el._vei = {});\n  // \u5F53\u524D\u4E8B\u4EF6\u540D\u5BF9\u5E94\u7684\u56DE\u8C03\u51FD\u6570\n  const exisitingInvoker = invokers[rawName]; // \u662F\u5426\u7F13\u5B58\u8FC7\n\n  if (nextValue && exisitingInvoker) {\n    // \u5982\u679C\u5DF2\u6709\u7F13\u5B58\u7684\u56DE\u8C03,\u76F4\u63A5\u66F4\u65B0\u4E3A\u65B0\u51FD\u6570\n    exisitingInvoker.value = nextValue;\n  } else {\n    // \u8F6C\u6362\u4E3A\u5C0F\u5199\u4E8B\u4EF6\u540D\n    const name = rawName.slice(2).toLowerCase();\n    if (nextValue) {\n      // \u6CA1\u6709\u7F13\u5B58,\u65B0\u5EFA\u4E00\u4E2A\u4E8B\u4EF6\u56DE\u8C03\u5E76\u7F13\u5B58\n      const invoker = (invokers[rawName]) = createInvoker(nextValue);\n      el.addEventListener(name, invoker);\n    } else if (exisitingInvoker) {\n      // \u5982\u679C\u4F20\u5165\u7A7A,\u5219\u79FB\u9664\u5BF9\u5E94\u7684\u4E8B\u4EF6\u76D1\u542C\n      el.removeEventListener(name, exisitingInvoker);\n      invokers[rawName] = undefined\n    }\n  }\n}\n\n\nfunction patchAttr(el, key, value) { // \u66F4\u65B0\u5C5E\u6027\n  if (value == null) {\n    el.removeAttribute(key);\n  } else {\n    el.setAttribute(key, value);\n  }\n}\n", "import { nodeOps } from \"./nodeOps\"\nimport { patchProp } from \"./patchProp\"\n\n// \u51C6\u5907\u597D\u6240\u6709\u6E32\u67D3\u65F6\u6240\u9700\u8981\u7684\u7684\u5C5E\u6027\nconst renderOptions = Object.assign({ patchProp }, nodeOps);\n"],
  "mappings": ";AAGO,IAAM,UAAU;AAAA,EACrB,QAAQ,CAAC,OAAO,QAAQ,WAAW;AACjC,WAAO,aAAa,OAAO,UAAU,IAAI;AAAA,EAC3C;AAAA,EACA,QAAQ,WAAS;AACf,UAAM,SAAS,MAAM;AACrB,QAAI,QAAQ;AACV,aAAO,YAAY,KAAK;AAAA,IAC1B;AAAA,EACF;AAAA,EACA,eAAe,CAAC,QAAQ,SAAS,cAAc,GAAG;AAAA,EAClD,YAAY,UAAQ,SAAS,eAAe,IAAI;AAAA,EAChD,SAAS,CAAC,MAAM,SAAS,KAAK,YAAY;AAAA,EAC1C,gBAAgB,CAAC,IAAI,SAAS,GAAG,cAAc;AAAA,EAC/C,YAAY,UAAQ,KAAK;AAAA,EACzB,aAAa,UAAQ,KAAK;AAAA,EAC1B,eAAe,cAAY,SAAS,cAAc,QAAQ;AAC5D;;;AClBO,IAAM,YAAY,CAAC,IAAI,KAAK,WAAW,cAAc;AAC1D,MAAI,QAAQ,SAAS;AACnB,eAAW,IAAI,SAAS;AAAA,EAC1B,WAAW,QAAQ,SAAS;AAC1B,eAAW,IAAI,WAAW,SAAS;AAAA,EACrC,WAAW,YAAY,KAAK,GAAG,GAAG;AAChC,eAAW,IAAI,KAAK,SAAS;AAAA,EAC/B,OAAO;AACL,cAAU,IAAI,KAAK,SAAS;AAAA,EAC9B;AACF;AAGA,SAAS,WAAW,IAAI,OAAO;AAE7B,MAAI,SAAS,MAAM;AACjB,OAAG,gBAAgB,OAAO;AAAA,EAC5B,OAAO;AACL,OAAG,YAAY;AAAA,EACjB;AACF;AAGA,SAAS,WAAW,IAAI,MAAM,MAAM;AAElC,QAAM,QAAQ,GAAG;AACjB,aAAW,OAAO,MAAM;AACtB,UAAM,OAAO,KAAK;AAAA,EACpB;AACA,MAAI,MAAM;AACR,eAAW,OAAO,MAAM;AACtB,UAAI,KAAK,QAAQ,MAAM;AACrB,cAAM,OAAO;AAAA,MACf;AAAA,IACF;AAAA,EACF;AACF;AAQA,SAAS,cAAc,cAAc;AACnC,QAAM,UAAU,CAAC,MAAM,QAAQ,MAAM,CAAC;AACtC,UAAQ,QAAQ;AAChB,SAAO;AACT;AAQA,SAAS,WAAW,IAAI,SAAS,WAAW;AAE1C,QAAM,WAAW,GAAG,SAAS,GAAG,OAAO,CAAC;AAExC,QAAM,mBAAmB,SAAS;AAElC,MAAI,aAAa,kBAAkB;AAEjC,qBAAiB,QAAQ;AAAA,EAC3B,OAAO;AAEL,UAAM,OAAO,QAAQ,MAAM,CAAC,EAAE,YAAY;AAC1C,QAAI,WAAW;AAEb,YAAM,UAAW,SAAS,WAAY,cAAc,SAAS;AAC7D,SAAG,iBAAiB,MAAM,OAAO;AAAA,IACnC,WAAW,kBAAkB;AAE3B,SAAG,oBAAoB,MAAM,gBAAgB;AAC7C,eAAS,WAAW;AAAA,IACtB;AAAA,EACF;AACF;AAGA,SAAS,UAAU,IAAI,KAAK,OAAO;AACjC,MAAI,SAAS,MAAM;AACjB,OAAG,gBAAgB,GAAG;AAAA,EACxB,OAAO;AACL,OAAG,aAAa,KAAK,KAAK;AAAA,EAC5B;AACF;;;ACrFA,IAAM,gBAAgB,OAAO,OAAO,EAAE,UAAU,GAAG,OAAO;",
  "names": []
}
